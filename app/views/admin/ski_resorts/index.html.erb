<div style="width: 90%; margin: 40px auto; font-family: 'Helvetica Neue', Arial, sans-serif;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
    <h1 style="color: #2c3e50;">„Çπ„Ç≠„ÉºÂ†¥ÁÆ°ÁêÜ (Admin)</h1>
    <div style="display: flex; gap: 10px; align-items: center;">
      <%= button_to "üîÑ Last Index ÂÖ®„É™„Çª„ÉÉ„Éà", reset_all_indices_admin_ski_resorts_path, method: :post, data: { turbo_confirm: "ÂÖ®„Çπ„Ç≠„ÉºÂ†¥„ÅÆ Last Index „Çí 0 „Å´„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºü" }, style: "padding: 10px 15px; background-color: #e67e22; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;" %>
      <%= link_to 'Êñ∞Ë¶èËøΩÂä†', new_admin_ski_resort_path, style: "padding: 10px 20px; background-color: #2980b9; color: white; text-decoration: none; border-radius: 4px;" %>
    </div>
  </div>

  <% if notice %>
    <p style="color: green; font-weight: bold;"><%= notice %></p>
  <% end %>

  <div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse; background-color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
      <thead>
        <tr style="background-color: #ecf0f1; border-bottom: 2px solid #bdc3c7;">
          <th style="padding: 12px; text-align: left;">Êó•Êú¨Ë™ûÂêç</th>
          <th style="padding: 12px; text-align: left;">Ëã±Ë™ûÂêç</th>
          <th style="padding: 12px; text-align: center;">Current Index</th>
          <th style="padding: 12px; text-align: center;">Last Index</th>
          <th style="padding: 12px; text-align: left;">Á∑ØÂ∫¶ / ÁµåÂ∫¶</th>
          <th style="padding: 12px; text-align: left;">Ê®ôÈ´ò (Base/Top)</th>
          <th style="padding: 12px; text-align: center;">Êìç‰Ωú</th>
        </tr>
      </thead>
      <tbody>
        <% @ski_resorts.each do |resort| %>
          <% current_idx = resort.cached_powder_index || 0 %>
          <% last_idx = resort.last_powder_index || 0 %>
          <tr style="border-bottom: 1px solid #ecf0f1;">
            <td style="padding: 12px; font-weight: bold;"><%= resort.name_ja %></td>
            <td style="padding: 12px; color: #7f8c8d;"><%= resort.name_en %></td>
            <td style="padding: 12px; text-align: center;">
              <span style="display: inline-block; padding: 4px 12px; border-radius: 12px; font-weight: bold; color: white; background-color: <%= current_idx > 50 ? '#27ae60' : (current_idx > 0 ? '#3498db' : '#bdc3c7') %>;">
                <%= current_idx %>
              </span>
            </td>
            <td style="padding: 12px; text-align: center;">
              <span style="display: inline-block; padding: 4px 12px; border-radius: 12px; font-weight: bold; color: white; background-color: <%= last_idx > 50 ? '#27ae60' : (last_idx > 0 ? '#3498db' : '#bdc3c7') %>;">
                <%= last_idx %>
              </span>
            </td>
            <td style="padding: 12px;"><%= resort.latitude %> / <%= resort.longitude %></td>
            <td style="padding: 12px;"><%= resort.elevation_base %>m / <%= resort.elevation_top %>m</td>
            <td style="padding: 12px; text-align: center;">
              <%= link_to 'Á∑®ÈõÜ', edit_admin_ski_resort_path(resort), style: "color: #f39c12; text-decoration: none; margin-right: 10px;" %>
              <%= link_to 'ÂâäÈô§', admin_ski_resort_path(resort), method: :delete, data: { turbo_method: :delete, turbo_confirm: 'Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü' }, style: "color: #e74c3c; text-decoration: none;" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div style="margin-top: 30px;">
    <%= link_to '‚Üê „Éà„ÉÉ„Éó„Éö„Éº„Ç∏„Å´Êàª„Çã', root_path, style: "color: #34495e; text-decoration: none;" %>
  </div>
</div>
