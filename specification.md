# ğŸ”ï¸ Powder Hunter â€• ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜æ›¸

> ãƒãƒƒã‚¯ã‚«ãƒ³ãƒˆãƒªãƒ¼ã‚¹ã‚­ãƒ¼ãƒ»ã‚¹ãƒãƒ¼ãƒœãƒ¼ãƒ‰æ„›å¥½è€…å‘ã‘ã«ã€æ—¥æœ¬å…¨å›½ã®ã‚¹ã‚­ãƒ¼å ´ã® **ãƒ‘ã‚¦ãƒ€ãƒ¼ã‚¹ãƒãƒ¼äºˆå ±** ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æä¾›ã™ã‚‹ Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

---

## 1. ã‚¢ãƒ—ãƒªæ¦‚è¦

| é …ç›® | å†…å®¹ |
|---|---|
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Ruby on Rails 8.1 |
| **èªè¨¼** | Deviseï¼ˆãƒ¡ãƒ¼ãƒ«ï¼‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ï¼‰ |
| **å¤–éƒ¨API** | [Open-Meteo API](https://api.open-meteo.com)ï¼ˆå¤©æ°—äºˆå ±å–å¾—ã€ç„¡æ–™ãƒ»API Keyä¸è¦ï¼‰ |
| **åœ°å›³** | Leaflet.js + OpenStreetMap |
| **ãƒ¡ãƒ¼ãƒ«é€ä¿¡** | ActionMailerï¼ˆGmail SMTPçµŒç”±ï¼‰ |
| **ãƒ‡ãƒ—ãƒ­ã‚¤** | Render.comï¼ˆrender.yaml ã«ã‚ˆã‚‹æ§‹æˆç®¡ç†ï¼‰ |
| **å¯¾è±¡ã‚¹ã‚­ãƒ¼å ´** | æ—¥æœ¬å…¨å›½14ç®‡æ‰€ï¼ˆåŒ—æµ·é“ã€œæ–°æ½Ÿãƒ»é•·é‡ãƒ»ç¾¤é¦¬ãƒ»å²©æ‰‹ãƒ»é’æ£®ï¼‰ |

---

## 2. ç”»é¢æ§‹æˆã¨æ©Ÿèƒ½è©³ç´°

### ç”»é¢â‘  ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ï¼ˆæœªãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ãƒˆãƒƒãƒ— `/`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ nav:  [Powder Hunter ãƒ­ã‚´]    [ãƒ­ã‚°ã‚¤ãƒ³] [æ–°è¦ç™»éŒ²] â”‚
â”‚                                              â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚          â”‚  èƒŒæ™¯: ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼   â”‚              â”‚
â”‚          â”‚  (3æšã®å±±å²³å†™çœŸãŒ     â”‚              â”‚
â”‚          â”‚   18ç§’å‘¨æœŸã§åˆ‡æ›¿)     â”‚              â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                              â”‚
â”‚             POWDER HUNTER                    â”‚
â”‚    ã€Œæ—¥æœ¬ã®ãƒãƒƒã‚¯ã‚«ãƒ³ãƒˆãƒªãƒ¼ã§ã€                    â”‚
â”‚      æœ€é«˜ã®ãƒ‘ã‚¦ãƒ€ãƒ¼ã‚¹ãƒãƒ¼ã«å‡ºä¼šãŠã†ã€‚ã€            â”‚
â”‚    ã€Œ14æ—¥é–“ã®å¤©æ°—äºˆå ±ã‹ã‚‰ã€ãƒ‘ã‚¦ãƒ€ãƒ¼æ—¥ã‚’è‡ªå‹•æ¤œå‡ºã€‚ã€  â”‚
â”‚                                              â”‚
â”‚    [ğŸ”ï¸ 14ã‚¹ã‚­ãƒ¼å ´] [ğŸ“Š ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°] [ğŸ“§ è‡ªå‹•é€šçŸ¥]â”‚
â”‚                                              â”‚
â”‚    [ å…¨ã‚¹ã‚­ãƒ¼å ´ã®ãƒ‘ã‚¦ãƒ€ãƒ¼æƒ…å ±ã‚’è¦‹ã‚‹ â†’ ]           â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸»ãªç‰¹å¾´:**
- ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®èƒŒæ™¯ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ï¼ˆ3æšã€CSSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- ã‚°ãƒ©ã‚¹ãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ é¢¨ã®ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒãƒƒã‚¸ï¼ˆ14ã‚¹ã‚­ãƒ¼å ´ / ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•° / è‡ªå‹•é€šçŸ¥ï¼‰
- CTAãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å…¨ã‚¹ã‚­ãƒ¼å ´ä¸€è¦§ï¼ˆ`/resorts`ï¼‰ã¸é·ç§»
- ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªå‹•çš„ã« `/resorts`ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

---

### ç”»é¢â‘¡ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ `/resorts`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ header:                                              â”‚
â”‚   [ç®¡ç†ç”»é¢(â€»admin)] [è¡¨ç¤ºã™ã‚‹ã‚¹ã‚­ãƒ¼å ´ã‚’ç·¨é›†ã™ã‚‹]         â”‚
â”‚   user@example.com ã•ã‚“ | [ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ]                  â”‚
â”‚                                                      â”‚
â”‚              Powder Hunter                           â”‚
â”‚   Find the best backcountry powder snow courses      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   ğŸ”ï¸ POWDER!  â”‚ â”‚  â„ï¸ SNOWING   â”‚ â”‚     â›„ï¸      â”‚  â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚  â”‚
â”‚  â”‚ ãƒ‹ã‚»ã‚³ãƒ¦ãƒŠã‚¤ãƒ†ãƒƒãƒ‰â”‚ â”‚ ç™½é¦¬ãƒãƒ¬ãƒ¼    â”‚ â”‚ å¦™é«˜æ‰ãƒåŸ   â”‚  â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚  â”‚
â”‚  â”‚ Powder Index:â”‚ â”‚ Powder Index:â”‚ â”‚ Powder Index:â”‚  â”‚
â”‚  â”‚  72 / 100   â”‚ â”‚  25 / 100   â”‚ â”‚   0 / 100   â”‚  â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚  â”‚
â”‚  â”‚ Next 24h:   â”‚ â”‚ Next 24h:   â”‚ â”‚ Next 24h:   â”‚  â”‚
â”‚  â”‚  40 cm      â”‚ â”‚  15 cm      â”‚ â”‚   0 cm      â”‚  â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚  â”‚
â”‚  â”‚ æ°—æ¸©:        â”‚ â”‚ æ°—æ¸©:        â”‚ â”‚ æ°—æ¸©:        â”‚  â”‚
â”‚  â”‚ -8Â°C / -2Â°C â”‚ â”‚ -3Â°C / 1Â°C  â”‚ â”‚  2Â°C / 8Â°C  â”‚  â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚  â”‚
â”‚  â”‚ ç›´è¿‘ãƒãƒ£ãƒ³ã‚¹:  â”‚ â”‚ ç›´è¿‘ãƒãƒ£ãƒ³ã‚¹:  â”‚ â”‚ ç›´è¿‘14æ—¥ã«   â”‚  â”‚
â”‚  â”‚ 2æœˆ25æ—¥      â”‚ â”‚ 3æœˆ1æ—¥       â”‚ â”‚ ãƒ‘ã‚¦ãƒ€ãƒ¼äºˆå ±  â”‚  â”‚
â”‚  â”‚ (æŒ‡æ•°: 72)   â”‚ â”‚ (æŒ‡æ•°: 25)   â”‚ â”‚ ã¯ã‚ã‚Šã¾ã›ã‚“   â”‚  â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚  â”‚
â”‚  â”‚ Elev: 300m  â”‚ â”‚ Elev: 750m  â”‚ â”‚ Elev: 731m  â”‚  â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚  â”‚
â”‚  â”‚[ğŸš—ãƒ«ãƒ¼ãƒˆè¡¨ç¤º] â”‚ â”‚[ğŸš—ãƒ«ãƒ¼ãƒˆè¡¨ç¤º] â”‚ â”‚[ğŸš—ãƒ«ãƒ¼ãƒˆè¡¨ç¤º] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¡¨ç¤ºå†…å®¹ï¼ˆå„ã‚«ãƒ¼ãƒ‰ï¼‰:**

| é …ç›® | èª¬æ˜ |
|---|---|
| **çµµæ–‡å­—ã‚¢ã‚¤ã‚³ãƒ³** | ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•° >50 â†’ ğŸ”ï¸ POWDER! / >0 â†’ â„ï¸ SNOWING / 0 â†’ â›„ï¸ |
| **ã‚¹ã‚­ãƒ¼å ´å** | ã‚¯ãƒªãƒƒã‚¯ã§14æ—¥é–“äºˆå ±ã®è©³ç´°ç”»é¢ã¸é·ç§» |
| **Powder Index** | ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ï¼ˆ0ã€œ100ï¼‰ |
| **Next 24h Snow** | ç›´è¿‘24æ™‚é–“ã®äºˆæƒ³é™é›ªé‡ï¼ˆcmï¼‰ |
| **Expected Temp** | äºˆæƒ³æœ€ä½/æœ€é«˜æ°—æ¸© |
| **ç›´è¿‘ã®ãƒãƒ£ãƒ³ã‚¹** | ä»Šå¾Œ14æ—¥é–“ã§æœ€åˆã«ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•° >0 ã¨ãªã‚‹æ—¥ä»˜ã¨æŒ‡æ•° |
| **ğŸš— ãƒ«ãƒ¼ãƒˆè¡¨ç¤º** | ãƒ–ãƒ©ã‚¦ã‚¶ã®ä½ç½®æƒ…å ±ã‚’å–å¾—ã—ã€Google Mapsã§é‹è»¢ãƒ«ãƒ¼ãƒˆã‚’è¡¨ç¤º |

**å‹•ä½œãƒ«ãƒ¼ãƒ«:**
- æœªãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šå…¨ã‚¹ã‚­ãƒ¼å ´ã‚’è¡¨ç¤º
- ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šè‡ªåˆ†ãŒé¸æŠã—ãŸæœ€å¤§3ã¤ã®ã‚¹ã‚­ãƒ¼å ´ã®ã¿è¡¨ç¤º
- æœªé¸æŠæ™‚ã¯ã€Œã¾ã ã‚¹ã‚­ãƒ¼å ´ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨é¸æŠç”»é¢ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¡¨ç¤º
- ã‚«ãƒ¼ãƒ‰ã¯ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ã®é«˜ã„é †ã«ã‚½ãƒ¼ãƒˆ

---

### ç”»é¢â‘¢ ã‚¹ã‚­ãƒ¼å ´é¸æŠç”»é¢ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆ `/selections`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¡¨ç¤ºã™ã‚‹ã‚¹ã‚­ãƒ¼å ´ã‚’é¸ã¶ï¼ˆæœ€å¤§3ã¤ï¼‰                        â”‚
â”‚                        ç¾åœ¨ã®é¸æŠæ•°: 1 / 3              â”‚
â”‚                        [ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           OpenStreetMap æ—¥æœ¬åœ°å›³                 â”‚   â”‚
â”‚  â”‚                                                â”‚   â”‚
â”‚  â”‚      ğŸ“å…«ç”²ç”°                                   â”‚   â”‚
â”‚  â”‚                                                â”‚   â”‚
â”‚  â”‚  ğŸ“ãƒ‹ã‚»ã‚³    ğŸ“æ—­å²³  ğŸ“é»’å²³                      â”‚   â”‚
â”‚  â”‚                                                â”‚   â”‚
â”‚  â”‚       ğŸ“ã‚­ãƒ­ãƒ­  ğŸ“å¯Œè‰¯é‡                          â”‚   â”‚
â”‚  â”‚                        ğŸ“é›«çŸ³  ğŸ“å¤æ²¹é«˜åŸ         â”‚   â”‚
â”‚  â”‚                                                â”‚   â”‚
â”‚  â”‚       ğŸ“ã‚¢ãƒ©ã‚¤ ğŸ“å¦™é«˜ ğŸ“ã‹ãã‚‰                    â”‚   â”‚
â”‚  â”‚              ğŸ“é‡æ²¢  ğŸ“è°·å·å²³                     â”‚   â”‚
â”‚  â”‚       ğŸ“ç™½é¦¬                                    â”‚   â”‚
â”‚  â”‚                                                â”‚   â”‚
â”‚  â”‚  â€» ãƒ”ãƒ³ã‚¯ãƒªãƒƒã‚¯ â†’ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§é¸æŠ/è§£é™¤å¯èƒ½        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ãƒ‹ã‚»ã‚³ãƒ¦ãƒŠã‚¤ãƒ†ãƒƒãƒ‰â”‚ â”‚ç™½é¦¬ãƒãƒ¬ãƒ¼  â”‚ â”‚é‡æ²¢æ¸©æ³‰    â”‚ ...       â”‚
â”‚  â”‚Niseko Unitedâ”‚ â”‚Hakuba    â”‚ â”‚Nozawa    â”‚              â”‚
â”‚  â”‚æ¨™é«˜: 300m  â”‚ â”‚æ¨™é«˜: 750mâ”‚ â”‚æ¨™é«˜: 565mâ”‚              â”‚
â”‚  â”‚            â”‚ â”‚          â”‚ â”‚          â”‚              â”‚
â”‚  â”‚ [âœ… è§£é™¤]  â”‚ â”‚[ãƒˆãƒƒãƒ—ã«è¡¨ç¤º]â”‚ â”‚[ãƒˆãƒƒãƒ—ã«è¡¨ç¤º]â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å‹•ä½œãƒ«ãƒ¼ãƒ«:**
- Leaflet.js ã«ã‚ˆã‚‹æ—¥æœ¬åœ°å›³ä¸Šã«ã‚¹ã‚­ãƒ¼å ´ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’è¡¨ç¤º
- ãƒãƒ¼ã‚«ãƒ¼ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‹ã‚‰ã‚‚ã€Œé¸æŠã€ã€Œè§£é™¤ã€æ“ä½œãŒå¯èƒ½
- ã‚°ãƒªãƒƒãƒ‰ãƒªã‚¹ãƒˆã‹ã‚‰ã‚‚ã€Œãƒˆãƒƒãƒ—ã«è¡¨ç¤ºã€ã§é¸æŠã€ã€Œè§£é™¤ã€ã§è§£é™¤
- æœ€å¤§3ã¤ã¾ã§é¸æŠå¯èƒ½ã€‚3ã¤é¸æŠæ¸ˆã¿ã®å ´åˆã¯ã€Œä¸Šé™ï¼ˆ3ã¤ï¼‰åˆ°é”ã€ã¨è¡¨ç¤ºã•ã‚Œãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–
- é¸æŠæ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºï¼ˆ `ç¾åœ¨ã®é¸æŠæ•°: X / 3`ï¼‰

---

### ç”»é¢â‘£ 14æ—¥é–“äºˆå ±è©³ç´°ï¼ˆ`/resorts/:id`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ header:                                              â”‚
â”‚          ãƒ‹ã‚»ã‚³ãƒ¦ãƒŠã‚¤ãƒ†ãƒƒãƒ‰                              â”‚
â”‚     Elevation: 300m | Lat: 42.8688 | Lon: 140.6974   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚            [â† æˆ»ã‚‹ (Back to Resorts)]                â”‚
â”‚                                                      â”‚
â”‚            14-Day Powder Forecast                    â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ æ—¥ä»˜    â”‚ å¤©æ°—      â”‚ æœ€ä½/æœ€é«˜æ°—æ¸© â”‚ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚2026-02-24â”‚ â„ï¸ 8 cm â”‚ -8Â°C / -2Â°C â”‚  12 / 100â”‚       â”‚
â”‚  â”‚2026-02-25â”‚ ğŸ”ï¸ 40 cmâ”‚ -10Â°C / -5Â°Câ”‚  72 / 100â”‚ â† å¼·èª¿ â”‚
â”‚  â”‚2026-02-26â”‚ â„ï¸ 3 cm â”‚ -5Â°C / 0Â°C  â”‚   6 / 100â”‚       â”‚
â”‚  â”‚2026-02-27â”‚ â›„ï¸ 0 cm â”‚ -2Â°C / 3Â°C  â”‚   0 / 100â”‚       â”‚
â”‚  â”‚  ...     â”‚  ...    â”‚    ...     â”‚   ...    â”‚       â”‚
â”‚  â”‚2026-03-09â”‚ â˜€ï¸ 0 cm â”‚  2Â°C / 8Â°C  â”‚   0 / 100â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â”‚  â€» ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•° 50è¶…ã®è¡Œã¯é’è‰²ã§å¼·èª¿è¡¨ç¤º                  â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¤©æ°—çµµæ–‡å­—ã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯:**

| æ¡ä»¶ | çµµæ–‡å­— |
|---|---|
| ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•° > 50 | ğŸ”ï¸ |
| é™é›ªé‡ > 0 | â„ï¸ |
| æœ€é«˜æ°—æ¸© > 5Â°C | â˜€ï¸ |
| ãã®ä»– | â›„ï¸ |

---

### ç”»é¢â‘¤ ç®¡ç†è€…ç”»é¢ï¼ˆadminæ¨©é™å¿…é ˆ `/admin/ski_resorts`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚¹ã‚­ãƒ¼å ´ç®¡ç† (Admin)       [ğŸ”„ Last Index å…¨ãƒªã‚»ãƒƒãƒˆ] [æ–°è¦è¿½åŠ ]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â” â”‚
â”‚ â”‚æ—¥æœ¬èªå â”‚è‹±èªå   â”‚Currentâ”‚Last   â”‚Last   â”‚ç·¯åº¦/çµŒåº¦â”‚æ¨™é«˜ â”‚æ“ä½œâ”‚ â”‚
â”‚ â”‚        â”‚        â”‚Index  â”‚Index  â”‚Date   â”‚        â”‚    â”‚   â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”¤ â”‚
â”‚ â”‚ãƒ‹ã‚»ã‚³   â”‚Niseko..â”‚ [72]  â”‚ [0]   â”‚ â€”     â”‚42.8/140â”‚300mâ”‚ç·¨é›†â”‚ â”‚
â”‚ â”‚        â”‚        â”‚(ç·‘)   â”‚(ç°)   â”‚       â”‚        â”‚/1308â”‚å‰Šé™¤â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”¤ â”‚
â”‚ â”‚ç™½é¦¬     â”‚Hakuba..â”‚ [25]  â”‚ [18]  â”‚2æœˆ20æ—¥â”‚36.7/137â”‚750mâ”‚ç·¨é›†â”‚ â”‚
â”‚ â”‚        â”‚        â”‚(é’)   â”‚(é’)   â”‚       â”‚        â”‚/1831â”‚å‰Šé™¤â”‚ â”‚
â”‚ â”‚ ...    â”‚ ...    â”‚ ...   â”‚ ...   â”‚ ...   â”‚ ...    â”‚... â”‚...â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç®¡ç†ç”»é¢ã®æ©Ÿèƒ½:**
- ã‚¹ã‚­ãƒ¼å ´ã®CRUDæ“ä½œï¼ˆæ–°è¦è¿½åŠ  / ç·¨é›† / å‰Šé™¤ï¼‰
- ç·¨é›†é …ç›®ï¼šè‹±èªåã€æ—¥æœ¬èªåã€ç·¯åº¦ã€çµŒåº¦ã€æ¨™é«˜ï¼ˆBase/Topï¼‰ã€Current Indexã€Last Indexã€Last Powder Date
- ã€ŒLast Index å…¨ãƒªã‚»ãƒƒãƒˆã€ãƒœã‚¿ãƒ³ï¼šå…¨ã‚¹ã‚­ãƒ¼å ´ã® `last_powder_index` ã‚’ `0` ã«ä¸€æ‹¬ãƒªã‚»ãƒƒãƒˆï¼ˆç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ä»˜ãï¼‰
- Current Index ã®ãƒãƒƒã‚¸ã‚«ãƒ©ãƒ¼ï¼šæŒ‡æ•° >50=ç·‘ / >0=é’ / 0=ç°

---

### ç”»é¢â‘¥ ãƒ¡ãƒ¼ãƒ«é€šçŸ¥

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä»¶åãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼ˆæ–°è¦ãƒãƒ£ãƒ³ã‚¹ï¼‰:
  ã€Powder Hunterã€‘ãƒ‹ã‚»ã‚³ãƒ¦ãƒŠã‚¤ãƒ†ãƒƒãƒ‰ã«ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒãƒ£ãƒ³ã‚¹åˆ°æ¥ï¼
  
ä»¶åãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼ˆè¤‡æ•°ãƒªã‚¾ãƒ¼ãƒˆï¼‰:
  ã€Powder Hunterã€‘ç™»éŒ²ã—ãŸ3ç®‡æ‰€ã®ã‚¹ã‚­ãƒ¼å ´ã«ãƒ‘ã‚¦ãƒ€ãƒ¼æƒ…å ±æ›´æ–°ï¼

ä»¶åãƒ‘ã‚¿ãƒ¼ãƒ³â‘¢ï¼ˆæ—¥ä»˜ãŒæ—©ã¾ã£ãŸå ´åˆï¼‰:
  ã€Powder Hunterã€‘ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒãƒ£ãƒ³ã‚¹æ—¥ãŒæ—©ã¾ã‚Šã¾ã—ãŸï¼

ä»¶åãƒ‘ã‚¿ãƒ¼ãƒ³â‘£ï¼ˆæ—¥ä»˜ãŒé…ã‚ŒãŸå ´åˆï¼‰:
  ã€Powder Hunterã€‘ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒãƒ£ãƒ³ã‚¹æ—¥ãŒé…ã‚Œãã†ã§ã™ï¼

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

user@example.com æ§˜

Powder Hunterã‹ã‚‰ã®æœ€æ–°ã®ãƒ‘ã‚¦ãƒ€ãƒ¼æƒ…å ±ã§ã™ï¼

--------------------------------------------------
ã€ã‚¹ã‚­ãƒ¼å ´ã€‘ ãƒ‹ã‚»ã‚³ãƒ¦ãƒŠã‚¤ãƒ†ãƒƒãƒ‰
ğŸ†• æ–°ãŸã«ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒãƒ£ãƒ³ã‚¹ãŒåˆ°æ¥ã—ã¾ã—ãŸï¼
ã€ãƒ‘ã‚¦ãƒ€ãƒ¼åˆ°æ¥æ—¥ã€‘ 2æœˆ25æ—¥
ã€ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ã€‘ 72 / 100
è©³ç´°: https://powderhunter.com/resorts/1
--------------------------------------------------
ã€ã‚¹ã‚­ãƒ¼å ´ã€‘ ç™½é¦¬ãƒãƒ¬ãƒ¼
â© ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒãƒ£ãƒ³ã‚¹æ—¥ãŒæ—©ã¾ã‚Šã¾ã—ãŸï¼ï¼ˆå‰å›: 3æœˆ3æ—¥ â†’ ä»Šå›: 2æœˆ28æ—¥ï¼‰
ã€ãƒ‘ã‚¦ãƒ€ãƒ¼åˆ°æ¥æ—¥ã€‘ 2æœˆ28æ—¥
ã€ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ã€‘ 35 / 100
è©³ç´°: https://powderhunter.com/resorts/2
--------------------------------------------------

--
Powder Hunter
```

---

## 3. ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ã¯ **Open-Meteo API** ã‹ã‚‰å–å¾—ã—ãŸ14æ—¥é–“ã®æ—¥æ¬¡äºˆå ±ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦ç®—å‡ºã•ã‚Œã¾ã™ã€‚

### è¨ˆç®—å¼

```
â‘  æ°—æ¸©ãƒšãƒŠãƒ«ãƒ†ã‚£ = æœ€é«˜æ°—æ¸© > 0Â°C ã®å ´åˆ â†’ æœ€é«˜æ°—æ¸© Ã— 2ã€ãã‚Œä»¥å¤– â†’ 0
â‘¡ åŸºç¤å€¤ = é™é›ªé‡(cm) âˆ’ æ°—æ¸©ãƒšãƒŠãƒ«ãƒ†ã‚£
â‘¢ ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•° = åŸºç¤å€¤ > 0 ã®å ´åˆ â†’ min(åŸºç¤å€¤ Ã— 2, 100)ã€ãã‚Œä»¥å¤– â†’ 0
```

### è¨ˆç®—ä¾‹

| ã‚±ãƒ¼ã‚¹ | é™é›ªé‡ | æœ€é«˜æ°—æ¸© | ãƒšãƒŠãƒ«ãƒ†ã‚£ | åŸºç¤å€¤ | ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•° |
|---|---|---|---|---|---|
| å¤§é›ªï¼†ä½æ¸© | 40 cm | -5Â°C | 0 | 40 | **80** |
| ä¸­é›ªï¼†ã‚„ã‚„æš– | 15 cm | 2Â°C | 4 | 11 | **22** |
| å°‘é›ªï¼†æš–ã‹ã„ | 5 cm | 5Â°C | 10 | -5 | **0** |
| é™é›ªãªã— | 0 cm | -3Â°C | 0 | 0 | **0** |

### è¨­è¨ˆæ„å›³
- **é™é›ªé‡ãŒå¤šã„** ã»ã©ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ãŒé«˜ããªã‚‹
- **æœ€é«˜æ°—æ¸©ãŒ0Â°Cã‚’è¶…ãˆã‚‹** ã¨é›ªè³ªãŒæ‚ªåŒ–ã™ã‚‹ãŸã‚ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚’ä»˜ä¸
- ä¸Šé™100ã§æ­£è¦åŒ–ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ„Ÿçš„ã«æ¯”è¼ƒã—ã‚„ã™ãã™ã‚‹

---

## 4. ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã®ä»•çµ„ã¿ï¼ˆ`powder:check` Rakeã‚¿ã‚¹ã‚¯ï¼‰

### å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°
æ¯æœè‡ªå‹•å®Ÿè¡Œï¼ˆRender.com ã® Cron Job ã§ `rake powder:check` ã‚’å®šæœŸå®Ÿè¡Œï¼‰

### åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

```mermaid
flowchart TD
    A[å…¨ã‚¹ã‚­ãƒ¼å ´ã®äºˆå ±ã‚’å–å¾—] --> B{14æ—¥é–“ã«ãƒ‘ã‚¦ãƒ€ãƒ¼æ—¥ã¯ã‚ã‚‹ã‹ï¼Ÿ}
    B -- No --> C[DBæ›´æ–°ã®ã¿ãƒ»é€šçŸ¥ãªã—]
    B -- Yes --> D{å‰å›ã®ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ã¯ï¼Ÿ}
    D -- "å‰å› = 0, ä»Šå› > 0" --> E["ğŸ†• :new<br>æ–°ãŸã«ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒãƒ£ãƒ³ã‚¹åˆ°æ¥"]
    D -- "å‰å› > 0, ä»Šå›ã®æ—¥ä»˜ < å‰å›æ—¥ä»˜" --> F["â© :earlier<br>ãƒ‘ã‚¦ãƒ€ãƒ¼æ—¥ãŒæ—©ã¾ã£ãŸ"]
    D -- "å‰å› > 0, ä»Šå›ã®æ—¥ä»˜ > å‰å›æ—¥ä»˜" --> G["âª :later<br>ãƒ‘ã‚¦ãƒ€ãƒ¼æ—¥ãŒé…ããªã£ãŸ"]
    D -- "å¤‰åŒ–ãªã—" --> C
    E --> H[å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ¡ãƒ¼ãƒ«é€ä¿¡]
    F --> H
    G --> H
    H --> I["DBæ›´æ–°<br>last_powder_index, last_powder_date,<br>cached_powder_index ã‚’ä¿å­˜"]
```

### é€šçŸ¥å¯¾è±¡
- ãã®ã‚¹ã‚­ãƒ¼å ´ã‚’ã€ŒãŠæ°—ã«å…¥ã‚Šã€ã«ç™»éŒ²ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¨å“¡
- 1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã€è¤‡æ•°ã‚¹ã‚­ãƒ¼å ´åˆ†ã®æƒ…å ±ã‚’ **1é€šã®ãƒ¡ãƒ¼ãƒ«ã«ã¾ã¨ã‚ã¦** é€ä¿¡

### DBä¿å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆæ¯æ—¥æ›´æ–°ï¼‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | ç”¨é€” |
|---|---|
| `cached_powder_index` | å½“æ—¥ã®ãƒ‘ã‚¦ãƒ€ãƒ¼æŒ‡æ•°ï¼ˆé¸æŠç”»é¢ã®åœ°å›³ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ç­‰ã§ä½¿ç”¨ï¼‰ |
| `last_powder_index` | 14æ—¥é–“ã§æœ€åˆã®ãƒ‘ã‚¦ãƒ€ãƒ¼æ—¥ã®æŒ‡æ•°ï¼ˆç¿Œæ—¥ã®æ¯”è¼ƒåŸºæº–ï¼‰ |
| `last_powder_date` | 14æ—¥é–“ã§æœ€åˆã®ãƒ‘ã‚¦ãƒ€ãƒ¼æ—¥ã®æ—¥ä»˜ï¼ˆç¿Œæ—¥ã®æ¯”è¼ƒåŸºæº–ï¼‰ |

---

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ERå›³

```mermaid
erDiagram
    users ||--o{ selections : "has_many"
    ski_resorts ||--o{ selections : "has_many"
    users }o--o{ ski_resorts : "through selections"

    users {
        integer id PK
        string email UK
        string encrypted_password
        boolean admin
        datetime remember_created_at
        string reset_password_token UK
        datetime reset_password_sent_at
    }

    ski_resorts {
        integer id PK
        string name_en
        string name_ja
        float latitude
        float longitude
        float elevation_base
        float elevation_top
        integer cached_powder_index
        integer last_powder_index
        date last_powder_date
    }

    selections {
        integer id PK
        integer user_id FK
        integer ski_resort_id FK
    }
```

### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- `Selection`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«æœ€å¤§3ã¤ã¾ã§ï¼ˆ`validate_selection_limit`ï¼‰
- `Selection`: åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼Ã—ã‚¹ã‚­ãƒ¼å ´ã®é‡è¤‡ä¸å¯ï¼ˆ`uniqueness: { scope: :user_id }`ï¼‰
- `User`: Devise ã® validatableï¼ˆemail, password ã®æ¨™æº–ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

---

## 6. ç™»éŒ²ã‚¹ã‚­ãƒ¼å ´ä¸€è¦§ï¼ˆ14ç®‡æ‰€ï¼‰

| # | æ—¥æœ¬èªå | è‹±èªå | åœ°åŸŸ | æ¨™é«˜(Base/Top) |
|---|---|---|---|---|
| 1 | ãƒ‹ã‚»ã‚³ãƒ¦ãƒŠã‚¤ãƒ†ãƒƒãƒ‰ | Niseko United | åŒ—æµ·é“ | 300m / 1,308m |
| 2 | ç™½é¦¬ãƒãƒ¬ãƒ¼ | Hakuba Valley | é•·é‡ | 750m / 1,831m |
| 3 | é‡æ²¢æ¸©æ³‰ã‚¹ã‚­ãƒ¼å ´ | Nozawa Onsen | é•·é‡ | 565m / 1,650m |
| 4 | å¦™é«˜æ‰ãƒåŸ | Myoko Suginohara | æ–°æ½Ÿ | 731m / 1,855m |
| 5 | å…«ç”²ç”°ã‚¹ã‚­ãƒ¼å ´ | Hakkoda Ski Area | é’æ£® | 660m / 1,324m |
| 6 | ã‹ãã‚‰ã‚¹ã‚­ãƒ¼å ´ | Kagura Ski Resort | æ–°æ½Ÿ | 620m / 1,845m |
| 7 | è°·å·å²³å¤©ç¥å¹³ã‚¹ã‚­ãƒ¼å ´ | Tanigawadake Tenjindaira | ç¾¤é¦¬ | 1,319m / 1,500m |
| 8 | å¤§é›ªå±±æ—­å²³ | Asahidake Ropeway | åŒ—æµ·é“ | 1,100m / 1,600m |
| 9 | å¤§é›ªå±±é»’å²³ | Kurodake Ropeway | åŒ—æµ·é“ | 670m / 1,300m |
| 10 | å¯Œè‰¯é‡ã‚¹ã‚­ãƒ¼å ´ | Furano Ski Resort | åŒ—æµ·é“ | 235m / 1,209m |
| 11 | ã‚­ãƒ­ãƒ­ã‚¹ãƒãƒ¼ãƒ¯ãƒ¼ãƒ«ãƒ‰ | Kiroro Snow World | åŒ—æµ·é“ | 570m / 1,180m |
| 12 | ãƒ­ãƒƒãƒ†ã‚¢ãƒ©ã‚¤ãƒªã‚¾ãƒ¼ãƒˆ | Lotte Arai Resort | æ–°æ½Ÿ | 329m / 1,429m |
| 13 | é›«çŸ³ã‚¹ã‚­ãƒ¼å ´ | Shizukuishi Ski Resort | å²©æ‰‹ | 430m / 1,126m |
| 14 | å¤æ²¹é«˜åŸã‚¹ã‚­ãƒ¼å ´ | Geto Kogen Resort | å²©æ‰‹ | 400m / 830m |

---

## 7. APIé€£æºï¼ˆOpen-Meteoï¼‰

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```
GET https://api.open-meteo.com/v1/forecast
```

### ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å€¤ |
|---|---|
| `latitude` | è¤‡æ•°ã‚¹ã‚­ãƒ¼å ´ã®ç·¯åº¦ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š |
| `longitude` | è¤‡æ•°ã‚¹ã‚­ãƒ¼å ´ã®çµŒåº¦ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š |
| `elevation` | è¤‡æ•°ã‚¹ã‚­ãƒ¼å ´ã® `elevation_base` ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š |
| `hourly` | `temperature_2m,snowfall` |
| `daily` | `snowfall_sum,temperature_2m_max,temperature_2m_min` |
| `timezone` | `auto` |
| `forecast_days` | `14` |

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- `Rails.cache.fetch` ã§ **3æ™‚é–“** ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã‚¹ã‚­ãƒ¼å ´IDã®çµ„ã¿åˆã‚ã›ã§ä¸€æ„åŒ–
- 1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡¨ç¤ºã¯æœ€å¤§3ã‚¹ã‚­ãƒ¼å ´ãªã®ã§ã€1å›ã®APIã‚³ãƒ¼ãƒ«ã§å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—

---

## 8. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä¸€è¦§

| HTTPãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹ | ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©#ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | èª¬æ˜ |
|---|---|---|---|
| GET | `/` | `home#index` | ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ï¼ˆæœªãƒ­ã‚°ã‚¤ãƒ³ï¼‰ / ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ï¼‰ |
| GET | `/resorts` | `resorts#index` | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆãƒ‘ã‚¦ãƒ€ãƒ¼äºˆå ±ä¸€è¦§ï¼‰ |
| GET | `/resorts/:id` | `resorts#show` | 14æ—¥é–“äºˆå ±è©³ç´° |
| GET | `/selections` | `selections#index` | ã‚¹ã‚­ãƒ¼å ´é¸æŠç”»é¢ï¼ˆåœ°å›³ä»˜ãï¼‰ |
| POST | `/selections` | `selections#create` | ã‚¹ã‚­ãƒ¼å ´ã‚’ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ  |
| DELETE | `/selections/:id` | `selections#destroy` | ã‚¹ã‚­ãƒ¼å ´ã‚’ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰è§£é™¤ |
| GET | `/admin/ski_resorts` | `admin/ski_resorts#index` | ç®¡ç†ç”»é¢ä¸€è¦§ |
| GET | `/admin/ski_resorts/new` | `admin/ski_resorts#new` | ã‚¹ã‚­ãƒ¼å ´æ–°è¦è¿½åŠ  |
| POST | `/admin/ski_resorts` | `admin/ski_resorts#create` | ã‚¹ã‚­ãƒ¼å ´æ–°è¦ä½œæˆ |
| GET | `/admin/ski_resorts/:id/edit` | `admin/ski_resorts#edit` | ã‚¹ã‚­ãƒ¼å ´ç·¨é›† |
| PATCH | `/admin/ski_resorts/:id` | `admin/ski_resorts#update` | ã‚¹ã‚­ãƒ¼å ´æ›´æ–° |
| DELETE | `/admin/ski_resorts/:id` | `admin/ski_resorts#destroy` | ã‚¹ã‚­ãƒ¼å ´å‰Šé™¤ |
| POST | `/admin/ski_resorts/reset_all_indices` | `admin/ski_resorts#reset_all_indices` | Last Index å…¨ãƒªã‚»ãƒƒãƒˆ |

---

## 9. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼æ¦‚è¦

```mermaid
flowchart LR
    A[ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸] -->|æ–°è¦ç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³| B[ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
    B -->|ã‚¹ã‚­ãƒ¼å ´åã‚¯ãƒªãƒƒã‚¯| C[14æ—¥é–“äºˆå ±è©³ç´°]
    B -->|ã‚¹ã‚­ãƒ¼å ´ã‚’ç·¨é›†ã™ã‚‹| D[ã‚¹ã‚­ãƒ¼å ´é¸æŠç”»é¢]
    B -->|ğŸš—ãƒ«ãƒ¼ãƒˆè¡¨ç¤º| E[Google Maps]
    D -->|ãƒˆãƒƒãƒ—ã«è¡¨ç¤º/è§£é™¤| D
    D -->|ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹| B
    C -->|â† æˆ»ã‚‹| B
    
    F[æ¯æœã® Rake ã‚¿ã‚¹ã‚¯] -->|ãƒ‘ã‚¦ãƒ€ãƒ¼å¤‰åŒ–ã‚’æ¤œçŸ¥| G[ãƒ¡ãƒ¼ãƒ«é€šçŸ¥]
    G -->|ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯| C
```
